创建索引就像在数据库中创建了一个`database`。在创建数据库表时，需要定义字段名称、类型、长度和约束等；同样，索引也需要定义字段和相应的约束，这个约束称为映射（`mapping`）。

我们创建索引后，可以直接向该索引添加文档，这种方式对文档的数据结构没有严格要求，可以创建任何结构的`JSON`文档。然而，使用映射后，文档的结构将受到约束。

我们再发送`PUT`请求创建一个新的索引：

```
http://10.40.18.40:9200/mundo
```

然后发送下面的`PUT`请求创建映射：

```
http://10.40.18.40:9200/mundo/_mapping
```

我们在请求体`JSON`中放置以下内容，这就是映射的结构：

```json
{
    "properties": {
        "name":{
        	"type": "text",
        	"index": true
        },
        "sex":{
        	"type": "keyword",
        	"index": true
        },
        "tel":{
        	"type": "keyword",
        	"index": false
        }
    }
}
```

在映射中，每个字段都有两个关键属性：`type`和`index`。其中，`type`属性的值为`text`时，字段会被拆分为单独的词汇单元进行全文搜索，而`keyword`则表示字段用于精确匹配，不会进行分词。`index`属性指示该字段是否建立索引。如果`index`为`false`，字段将不会创建倒排索引，但仍可以用于搜索。

然后我们使用下面的`PUT`请求查询这个映射：

```
http://10.40.18.40:9200/mundo/_mapping
```

查询结果如下所示：

```json
{
    "mundo": {
        "mappings": {
            "properties": {
                "name": {
                    "type": "text"
                },
                "sex": {
                    "type": "keyword"
                },
                "tel": {
                    "type": "keyword",
                    "index": false
                }
            }
        }
    }
}
```

> **注意：** 创建映射并不意味着插入到该索引中的文档只能包含这些字段。这与关系型数据库中定义的表结构不同，后者只能插入符合预定义结构的数据。在`Elasticsearch`中，映射只是定义了字段的类型和约束，而文档可以包含其他字段。

例如上面这个映射，我再插入一个如下所示的文档：

```json
{
    "email": "userwsj@126.com"
}
```

我们发现插入操作成功完成，再次查询映射，结果如下：

```json
{
    "mundo": {
        "mappings": {
            "properties": {
                "email": {
                    "type": "text",
                    "fields": {
                        "keyword": {
                            "type": "keyword",
                            "ignore_above": 256
                        }
                    }
                },
                "name": {
                    "type": "text"
                },
                "sex": {
                    "type": "keyword"
                },
                "tel": {
                    "type": "keyword",
                    "index": false
                }
            }
        }
    }
}
```

我们发现`email`字段被自动添加了，这种行为称为动态映射。它类似于关系型数据库中，根据插入的数据自动添加字段的过程。

即使我们不手动创建映射，插入文档时也会自动生成映射。手动创建映射主要是为了给字段定义特定的约束。为了确保更高的稳定性，建议在开发中显式定义映射，而不是依赖动态映射。

> **注意：** 一旦创建了索引的映射，就无法修改或删除它。如果需要重新定义映射，必须删除现有索引并重新创建。