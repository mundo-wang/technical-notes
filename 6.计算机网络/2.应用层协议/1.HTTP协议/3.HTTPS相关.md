`HTTP`被认为是不安全的协议，主要原因有两个：

1. 明文传输：`HTTP`以明文形式传递数据，意味着信息在传输过程中可以被第三方窃听，导致敏感数据暴露。
2. 无法验证身份：`HTTP`无法验证通信双方的身份，使得中间人攻击（`MITM`）更容易发生。

为了解决这些问题，我们采用了`HTTPS`技术。

`HTTPS`是在`HTTP`基础上添加了`TLS/SSL`加密层，从而确保通信的加密传输、身份验证和完整校验，如下图所示：

<img src="image/30908cb43ce642caa37aa80c20d614a0.png" alt="在这里插入图片描述" style="zoom:50%;" />

1. 加密传输：`HTTPS`在数据传输前，会通过`TLS`协议对通信内容进行加密。即使数据在传输过程中被第三方截获，由于其内容是密文，攻击者也无法直接解析出真实信息，从而有效防止敏感数据泄露。
2. 身份认证：`HTTPS`依赖于数字证书体系。服务器会向客户端提供由权威`CA`机构签发的证书，客户端通过校验证书的合法性，确认当前访问的服务器身份真实可信，从而避免被伪装的服务器欺骗，降低中间人攻击的风险。
3. 数据完整性校验：在`HTTPS`通信过程中，`TLS`会对传输的数据进行完整性校验。如果数据在传输途中被篡改，接收方可以检测到异常并拒绝该数据，确保数据在传输过程中未被恶意修改。

`HTTPS`协议下，浏览器与服务器需通过`SSL/TLS`握手建立加密通信，流程如下：

1. 客户端发送`ClientHello`： 浏览器向服务器发送握手请求，携带自身支持的加密套件列表、`TLS`版本以及客户端随机数等信息。
2. 服务器响应`ServerHello`： 服务器选择一种加密套件，并返回服务器随机数，同时发送包含公钥信息的`SSL`证书。
3. 客户端验证服务器证书： 浏览器对服务器返回的`SSL`证书进行校验，包括证书链是否可信、证书是否过期、域名是否匹配等。
4. 密钥协商与交换：证书验证通过后，客户端与服务器基于前面选择的加密套件中的密钥交换算法，生成共享的对称加密密钥。
5. 建立加密通信通道：握手完成后，双方切换至加密状态，后续所有`HTTP`请求与响应数据均在加密通道中传输。

尽管`SSL`（`Secure Sockets Layer`，安全套接层）协议已被`TLS`（`Transport Layer Security`，传输层安全）协议所取代，但在实际使用中，人们仍习惯以`SSL`或`SSL/TLS`作为这一类安全协议的统称。上述步骤中所提及的`SSL`证书，只是对该证书的历史性、工程化称呼，其本质是`X.509`数字证书。事实上，现代`HTTPS`通信所采用的协议版本均为`TLS 1.2`或`TLS 1.3`。

在`SSL/TLS`握手过程中，客户端随机数与服务端随机数的长度均为`32`字节，它们与密钥交换阶段产生的共享秘密共同参与会话密钥的生成。通过在每次握手中引入新的随机数，即使使用相同证书与加密套件，也能够确保最终生成的会话密钥具有唯一性与不可预测性。

`HTTP`与`HTTPS`的特征比较如下：

| 特征     | `HTTP`                   | `HTTPS`                             |
| -------- | ------------------------ | ----------------------------------- |
| 安全性   | 数据以明文传输，不安全。 | 数据经过加密，提供安全连接。        |
| 协议     | 超文本传输协议。         | 安全超文本传输协议。                |
| 默认端口 | `80`端口。               | `443`端口。                         |
| 连接方式 | 非安全，无加密。         | 安全，使用`SSL/TLS`进行加密。       |
| 性能     | 通常更快。               | 可能引入额外的计算和通信开销。      |
| 成本     | 协议本身无费用。         | 需要获取和维护`SSL`证书，会有费用。 |
| 配置     | 配置相对简单。           | 配置更为复杂，涉及证书管理。        |
| 缓存     | 通常更易实现缓存。       | 缓存可能更为复杂。                  |

综上，`HTTPS`通过加密传输、身份验证以及数据完整性保护，弥补了`HTTP`在安全性上的天然缺陷，已经成为当前互联网应用中事实上的标准通信方式。
