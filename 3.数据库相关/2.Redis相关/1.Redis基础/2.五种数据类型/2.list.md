### 1. 底层结构

`Redis`中的列表底层使用`quicklist`数据结构，可以理解为一个双向链表。当列表元素较少时，`Redis`使用`ziplist`存储，将所有元素紧挨着存放在一块连续的内存空间中。当数据量增加时，`Redis`将`ziplist`与链表结合，形成`quicklist`。

列表的元素下标从左往右以`0`开始，从右往左以`-1`开始。其数据结构为：单个`key`对应多个有序`value`。

```mathematica
Key: shopping_cart
  └─ Value 1: apple
  └─ Value 2: banana
  └─ Value 3: orange
```

### 2. 适用场景

适用于消息队列、发布/订阅、最新消息列表等场景。

### 3. 操作命令

#### 3.1 创建列表`key`，并将一个或多个值插入列表

```shell
lpush key value1 value2... # 左插入
rpush key value1 value2... # 右插入
```

#### 3.2 更改指定位置元素值

```shell
lset key index value
```

该命令中的`index`是从左往右、从`0`开始计数的。若超出范围会报错，且不会修改任何数据。

#### 3.3 获取指定下标区间的元素

```shell
lrange key startIndex endIndex
```

若想获取列表所有元素，可以使用下面命令：

```sh
lrange key 0 -1
```

#### 3.4 移除并返回元素

`pop`操作每次只能移除并返回一个元素：

```shell
lpop key # 左弹出
rpop key # 右弹出
```

> `list`类型不支持值为空`list`。当列表中所有元素被移除（例如通过`lpop`反复弹出）后，对应的键会被`Redis`自动删除。

#### 3.5 获取列表中指定下标的元素值

```shell
lindex key index
```

#### 3.6 获取列表长度

```shell
llen key
```

#### 3.7 移除`count`个列表中和`value`相等的数据

```shell
lrem key count value
```

- 若`count > 0`，表示从左侧计数。

- 若`count < 0`，表示从右侧计数。

- 若`count = 0`，表示移除全部。

#### 3.8 保留指定范围元素（闭区间）

```shell
ltrim key startIndex endIndex
```
