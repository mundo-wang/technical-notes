`Master`节点控制整个集群，其组件包括以下内容：

### 1. `Controller Manager`

`Controller Manager`是`Master`节点的关键组件，负责运行控制器。控制器是一种机制，确保集群的实际状态与期望状态一致。

常见的控制器包括：

1. **`Node Controller`**：监控节点的状态，处理节点故障，确保节点数量符合预期。
2. **`Replication Controller`**：监控集群中`Pod`的数量，确保实际数量与期望值一致。
3. **`Namespace Controller`**：管理命名空间相关资源，确保命名空间的创建和删除按预期进行。
4. **`Service Controller`**：监控`Service`的变化，确保负载均衡器配置正确。

`Controller Manager`通过处理故障和节点变化，确保`Kubernetes`集群的高可用性和稳定性。

### 2. `etcd`

`etcd`的原理类似于`Redis`，用于存储分布式系统的配置数据、元数据和状态信息。

在`Kubernetes`中，`etcd`用于保存整个集群的配置信息、节点状态、服务发现信息以及其他关键数据。

### 3. `Scheduler`

调度器负责监控新创建的、尚未分配到`Node`的`Pod`，并为其选择一个适当的`Node`进行运行。

一旦调度器选择了目标`Node`，它会更新集群状态，并通知`API Server`以更新相应的资源对象。

### 4. `Api Server`

`API Server`是整个`K8s`系统的核心组件，它允许用户、管理员和其他组件通过`RESTful API`与`Kubernetes`集群进行通信和交互。

它的主要功能包括：	

1. 管理和控制`Kubernetes`的各种资源，如`Pod`、`Service`、`Node`等，支持创建、更新和删除操作。
2. 与`etcd`交互，将集群状态信息存储到`etcd`中，并在需要时检索这些信息。
3. 对`API`请求进行身份验证和授权，确保只有经过授权的用户或组件才能执行相应操作。
4. 支持`webhook`机制，允许用户自定义验证和修改请求。

总体而言，`API Server`是`Kubernetes`集群的核心，为用户和其他组件提供了统一的入口点，用于对集群进行管理和控制。

### 5. 减少`Master`节点挂掉的影响

如果我们部署的是单机`Master`节点，其挂掉可能导致以下问题：

1. `Scheduler`不可用：新创建的`Pod`可能无法被调度到集群中。
2. `Controller Manager`不可用：集群的管理功能可能受到限制。
3. `API Server`不可用：无法与集群进行通信。

为尽量避免这些问题，通常采取以下措施：

1. 部署高可用性集群：使用负载均衡器将请求分发到多个`Master`节点，以确保即使一个`Master`节点故障，其他节点仍可提供服务。

2. 定期备份关键数据：定期备份`Master`节点上的关键数据，如`etcd`存储，以便在节点故障时快速恢复状态。

3. 设置监控系统：实时监测`Master`节点的关键指标，并在发生故障时触发警报，及时通知相关人员。