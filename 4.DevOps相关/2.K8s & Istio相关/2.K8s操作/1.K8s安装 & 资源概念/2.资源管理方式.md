在`Kubernetes`（`K8s`）中，所有操作都围绕资源进行，用户通过对这些资源的管理来有效地控制整个集群。`Kubernetes`的核心基于集群系统，使用户能够轻松部署和运行各种服务，这通常涉及在集群中启动容器并运行特定的程序。

`Kubernetes`以`Pod`为最小的管理单元，而非直接管理容器。`Pod`是一组紧密关联的容器，它们共享网络和存储资源。通常，`Kubernetes`通过`Pod Controller`来管理`Pod`，以确保它们始终处于用户期望的状态。

为了提供稳定的网络标识和访问方式，`K8s`引入了`Service`资源。`Service`作为一个抽象层，为一组`Pod`提供统一的访问入口，并通过`ClusterIP`、`NodePort`、`LoadBalancer`等方式将流量引导至相应的`Pod`。

`Kubernetes`还提供了包括`Persistent Volume Claims（PVC）`和`ConfigMap`在内的多种存储系统抽象。这种架构使得`Kubernetes`成为一个强大而灵活的容器编排平台，通过资源的高度抽象与自动化管理，显著简化了复杂应用的部署与维护流程。

<img src="image/image-20200406225334627.png" alt="image-20200406225334627" style="zoom: 50%;" />

学习`Kubernetes`的核心，就是掌握如何在集群上操作`Pod`、`Pod`控制器、`Service`、存储等各种资源。

在操作`Kubernetes`资源时，通常有以下三种管理方式：

1. 命令式对象管理： 直接使用命令操作`Kubernetes`资源，例如：

```bash
kubectl run nginx-pod --image=nginx:1.17.1 --port=80
```

2. 命令式对象配置： 通过命令（不含`apply`命令）结合配置文件来操作`Kubernetes`资源，例如：

```bash
kubectl create -f nginx-pod.yaml
```

3. 声明式对象配置： 通过`apply`命令结合配置文件来操作`Kubernetes`资源，例如：

```bash
kubectl apply -f nginx-pod.yaml
```

命令式对象管理是通过`kubectl`等命令行工具直接操作`Kubernetes`对象的即时状态。

命令式对象配置和声明式对象配置都涉及操作`yaml`文件，但有所不同：命令式对象配置是直接定义和创建`Kubernetes`对象，而声明式对象配置则描述了`Kubernetes`对象的期望状态，并让`Kubernetes`自动实现这一状态。

| 类型               | 适用场景  | 优点                      | 缺点                                       |
| ------------------ | --------- | ------------------------- | ------------------------------------------ |
| 命令式对象管理 | 测试      | 简单直观，操作迅速         | 仅适用于管理活动对象，难以审计和跟踪       |
| 命令式对象配置 | 开发      | 易于审计和跟踪，操作灵活   | 随项目规模增大，配置文件增多，操作繁琐     |
| 声明式对象配置 | 开发和生产 | 支持批量操作，易于扩展     | 调试困难，配置复杂度较高                   |

上述资源操作分类来自“黑马程序员”培训视频，在概念上，使用了意义相近的术语。然而，“命令式对象配置”和“声明式对象配置”之间的区分并不明确，特别是将`apply`命令单独归类可能导致混淆。

为了更清晰地理解这些操作方式，我将其归纳为两类：

1. 直接使用命令操作资源：类似于在`Docker`中使用`docker run`命令启动容器，在`Kubernetes`中也可以通过命令行直接操作资源。
2. 通过命令操作`YAML`文件来管理资源：类似于在`Docker`中使用`docker-compose.yaml`文件进行容器编排，在`Kubernetes`中可以定义`YAML`文件来描述资源，然后通过命令操作这些文件以管理资源。
