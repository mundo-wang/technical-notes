在使用`Git`进行代码托管与团队协作时，`SSH`是一种常见且安全的身份认证方式。通过配置`SSH`密钥对，可以在本地环境与代码托管平台（如`GitHub`）之间建立基于非对称加密机制的信任关系，在提升安全性的同时显著改善使用体验。

在`SSH`体系中，核心概念主要包括公钥和私钥两部分：

1. 公钥（`public key`）：用于分享给远程服务器或代码托管平台。它是非敏感信息，用于验证对应私钥生成的加密签名。
2. 私钥（`private key`）：保存在本地计算机上，必须严格保密。它用于在连接时对发送的数据进行加密签名，从而证明身份。

当我们通过`SSH`连接`GitHub`时，远程平台会使用已配置的公钥对本地私钥生成的签名进行校验，从而确认当前操作请求由私钥的合法持有者发起，实现身份认证过程。在整个验证流程中无需输入账号和密码，即可完成安全可靠的身份确认与访问控制。

`SSH`密钥对中的公钥和私钥是在本地生成的，我们可以使用`SSH`密钥生成工具（如`ssh-keygen`）来生成一对`SSH`密钥。一台机器理论上可以生成任意多个`SSH`密钥对，每个密钥对都是一组独立的公钥和私钥文件，通常会以不同文件名保存。

我们进入`Git Bash`或终端，运行以下命令：

```sh
ssh-keygen -t rsa -b 4096 -C "userwsj@126.com"
```

该命令的`-C`参数用于设置一段备注，它会在`id_rsa.pub`文件末尾显示，方便区分不同机器或用户的密钥。

这里我们指定密钥的类型为`RSA`算法，指定密钥的长度为`4096`位，并使用邮箱为生成的公钥添加一个注释。

运行命令后，程序会提示你输入保存`SSH`密钥对的位置（默认在`~/.ssh/`目录下，系统隐藏目录）以及设置`passphrase`（密码短语），用于为私钥文件增加额外的保护。这里我们选择使用默认目录，并且不设置密码短语，也就是连按`3`次回车。

命令的运行结果如下所示：

<img src="image/image-20250804154305005.png" alt="image-20250804154305005" style="zoom:50%;" />

运行后，就可以在`~/.ssh/`目录下看到生成的`SSH`密钥对的文件，其中`id_rsa`为私钥，`id_rsa.pub`为公钥：

<img src="image/image-20250804153655289.png" alt="image-20250804153655289" style="zoom:60%;" />

我们打开`id_rsa.pub`文件，完整复制内容，打开`GitHub`，进入设置，选择`New SSH Key`：

<img src="image/image-20250804154725662.png" alt="image-20250804154725662" style="zoom:50%;" />

粘贴前面复制的公钥内容，创建`SSH Key`：

<img src="image/image-20250804154934034.png" alt="image-20250804154934034" style="zoom:50%;" />

使用以下命令，确认`SSH`代理已启动：

```sh
eval "$(ssh-agent -s)"
```

接着将私钥添加到`SSH`代理：

```sh
ssh-add ~/.ssh/id_rsa
```

使用以下命令，测试`SSH`密钥对在`GitHub`上是否配置成功：

```sh
ssh -T git@github.com
```

运行命令结果如下所示：

<img src="image/image-20250804155338328.png" alt="image-20250804155338328" style="zoom:50%;" />

第一次通过`SSH`连接到`github.com`时，`SSH`客户端会发出安全提示，内容是：

```sh
The authenticity of host 'github.com (20.205.243.166)' can't be established.
ECDSA key fingerprint is SHA256:...
Are you sure you want to continue connecting (yes/no/[fingerprint])?
```

系统提示你是否信任这个主机，如果信任，就输入`yes`继续。输完后这个指纹信息会被保存在你的`~/.ssh/known_hosts`文件中，下一次连接时就不会再次提示。输入`yes`后出现提示：

```sh
Warning: Permanently added 'github.com,20.205.243.166' (ECDSA) to the list of known hosts.
```

这表示已经信任并记录了`GitHub`的主机指纹，之后连接将不再重复提示。