`WebSocket`（网络套接字）是应用层的一种网络通信协议，依赖于传输层的`TCP`协议，支持客户端和服务端之间的全双工通信。与每次都通过完整`HTTP`请求建立新连接不同，`WebSocket`只需一次握手，后续的数据传输不再依赖`HTTP`，实现了更高效的通信。

`WebSocket`的握手过程基于`HTTP/HTTPS`协议，通过`Upgrade`头部请求协议切换。握手成功后，通信协议切换为`WebSocket`，客户端和服务端之间的连接保持持久，且可以双向传输数据，无需每次都发送`HTTP`头部信息。

`WebSocket`在传输数据时通常使用两种格式：

1. 文本格式： 使用`UTF-8`编码文本数据，适用于传输可读字符数据，如`JSON`、`XML`、`HTML`或纯文本。
2. 二进制格式： 传输二进制数据块，适用于图片、音频、视频等非文本内容，通常通过字节数组或缓冲区进行操作。

下面整理一下`Websocket`和`HTTP`这两个协议的区别：

| 区别类型 | `WebSocket`                                                | `HTTP`                                            |
| -------- | ---------------------------------------------------------- | ------------------------------------------------- |
| 连接类型 | 双向，全双工。建立连接后，服务端和客户端都可随时发送数据。 | 单向，请求-响应模式。客户端发送请求，服务端响应。 |
| 连接保持 | 一次连接后持续保持，直到主动关闭或出现错误。               | 每个请求-响应周期后连接通常关闭。                 |
| 握手     | 通过`HTTP`进行初始握手，随后升级到`WebSocket`协议。        | 直接使用`HTTP`协议进行请求和响应。                |
| 消息格式 | 以帧为单位，支持文本和二进制两种格式。                     | 以请求-响应为单位，通常为文本格式。               |
| 协议开销 | 较低，建立连接后保持传输通道，头部信息较少。               | 较高，每次请求都需要完整的头部信息。              |
| 适用场景 | 适用于即时通讯、在线游戏、实时数据流等。                   | 适用于网页浏览、数据检索等。                      |
| 扩展性   | 可通过子协议（`subprotocols`）扩展功能。                   | 通过不同的`HTTP`方法和状态码扩展功能。            |
| 安全性   | 可通过`wss`（`WebSocket Secure`）协议进行加密。            | 支持`TLS`加密，通常通过`HTTPS`实现。              |

`WebSocket`的主要应用场景包括即时通讯、在线协作、在线游戏、金融服务等。